<script type="text/javascript">
eddisp.finalfunc = function(a){ //FIXME being done twice...
 $("argument_operations").style.display=(a==="Signature"?"block":"none");
 if (a==="Render") $("render").src = window.location.href.replace(/^.*\//, '/')
}
var lists = {
 arguments_container: {
  insfunc: function(){
   var d,i,n=0;
   for (i=0;i<this.actions.length;i++) {
    d=this.actions[i].firstChild.id;
    n=Math.max(n,parseFloat(d.slice(4))) //avoid collisions
   }
   n++;
   this.target.appendChild($("argument_stamp").cloneNode(true)).setAttribute("id","arg_"+n);
   (h=$("arg_"+n).childNodes[1].childNodes[1]).childNodes[1].innerHTML=this.insname;
   h.lastChild.value=this.insname;
   h.childNodes[3].style.display="none";
   h.childNodes[4].style.display="inline";
   h.childNodes[4].focus();
   $("arg_"+n).getElementsByClassName("view")[0].onmousedown=viewlinks
  },
  finalfunc: arity_display
 }
};

function arity_display(n) {
 var i=1;
 while (!(target=$("arg_"+n))&&i!=1000) {
  n+=2*i*(i%2)-i; //1D spiral search (for del)
  i++
 }
 var a=new List((sublist=target.parentNode.parentNode).id);
 if (a.length===1) {sublist.previousSibling.previousSibling.style.display="none"}
 else sublist.previousSibling.previousSibling.style.display="block";
 if ((f=sublist.firstChild.firstChild).firstChild.innerHTML==="\u2193") f.removeChild(f.firstChild);
 if (f!==target&&target.firstChild.innerHTML!=="\u2193") {
  target.insertBefore(document.createElement("div"),target.firstChild).setAttribute("class","arrow");
  target.firstChild.innerHTML="&darr;"
 }
}
</script>

<style type="text/css">
#argument_operations {
 display:none;
 float:right;
 border-right:1px solid black;
 margin-right:20px
}
#argument_stamp,#ins_stamp {
 display:none
}
#signature_frame {
 padding:0px 20px 0px 20px;
 max-height:100%;
 overflow:auto
}
#ins_item {
 clear:left
}
#arguments_container li {
 width:60%;
 margin:20px
}
#arguments_container li:only-child {
 margin:0px;
}
.arrow {
 text-align:center;
 font-size:x-large
}
.summary {
 overflow:hidden
}
</style>
