<script type="text/javascript">
eddisp.finalfunc=function(a){
 $("form_operations").style.display=(a==="Forms"?"block":"none");
 if (a==="Render") $("render").src = window.location.href.replace(/^.*\//, '/')
}
var subframes=(function(a){
 var i=[],j=[];
 for (b=1;b<=a;b++) {
  i.push("form_"+b);
  j.push(["form_result_"+b,"form_code_"+b]);
 }
 return {ids:i, panels:j}
})(<%= @editor.data.forms.length %>),
lists={
 forms_container: {
  insfunc: function() {
   var d,i,n=0,r;
   for (i=0;i<this.actions.length;i++) {
    d=this.actions[i].firstChild.id;
    n=Math.max(n,parseFloat(d.slice(5))) //avoid collisions
   }
   n++;
   this.target.appendChild($("form_stamp").cloneNode(true)).setAttribute("id",r="form_"+n);
   $(r).childNodes[1].childNodes[1].innerHTML=this.insname;
   $(r).childNodes[3].name="editor[forms][][" + this.insname + "]";
   $(r).style.display="table";
   subframes.ids.push(r);
   subframes.panels.push([$(r).childNodes[5].id="form_result_"+n,$(r).childNodes[3].id="form_code_"+n]);
  }
 },
 menu_items_1: {
  insfunc: function() {
   var a=this.target.appendChild(document.createElement("a"));
   a.href="#";
   a.innerHTML=this.insname;
   a.onclick=ref;
  }
 }
};

function ref(){alert('blegh');return false}/*
function ren(e) { //D:
l="menu_items_1";
 if (e instanceof Event) {
  var b=this.parentNode.appendChild($("ins").cloneNode(true)),ret;
  b.id="ren";
//alert(this.parentNode.childNodes.indexOf(this))
//  b.onblur=new Function("ren($('menu_items_"+1+"').childNodes["+this.parentNode.childNodes.indexOf(this)+"])");
//  b.onblur=ren.call(this);
b.onblur=function(e){ren(e.target.value)};
  b.onkeypress=function(e){if (e.which===13) this.blur()};
  b.style.textAlign="right";
  b.value=lists[l].actions.typelabel;
  inputFocus("ren",lists[l].actions.typelabel);
  b.value=this.parentNode.firstChild.innerHTML;
  b.previousSibling.style.display="none";
  b.focus();
 }
 else {/*
  e.innerHTML=(x=e.parentNode).lastChild.value;
  e.style.display="";
  x.removeChild(x.lastChild);*\
  (x=$(l)).firstChild.text=e;
  x.firstChild.style.display="";
  x.removeChild(x.lastChild);
 }
 return false;
}
*/
function toggle_list(it) {
 var li,x,y,z,items;
 if ((li=it.parentNode).style.backgroundColor==="orange") return true;
 items=li.parentNode.getElementsByTagName("li");
 li.style.backgroundColor="orange";
 items[(li===items[0])?1:0].style.backgroundColor="transparent";
 for (var n=li;n;n=n.parentNode) if ((x=subframes.ids.indexOf(n.id))!==-1) break
 y=($((z=subframes.panels[x])[0]).style.display==="none");
 $(z[0]).style.display=y?"":"none";
 $(z[1]).style.display=y?"none":"";
 if (y) $(z[0]).innerHTML=$(z[1]).value;
}
</script>
<style type="text/css">
ul * {
 margin:0px;
 outline:none
}
ul {
 margin:0px
}
#form_operations {
 display:none;
 float:right;
 border-right:1px solid black;
 margin-right:20px
}
#form_stamp,#ins_stamp {
 display:none
}
.navlist {
 display:table-cell;
 height:100%;
 width:20%;
 vertical-align:top;
 text-align:right;
 padding-right:10px;
 margin-right:0px
}
.navlist>div,.navlist>ul>li {
 padding:0px 5px 0px 5px
}
.navlist>* {
 padding:5px 0px 5px 0px
}
#forms_container {
 max-height:100%;
 overflow:auto
}
#forms_container>li>* {
 display:table;
 height:80%;
 width:60%
}
.bottom>div,#forms_container,#forms_container>li {
 height:100%;
 width:100%
}
</style>
